<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition>

	<h:panelGrid columns="2">
		<h:outputLabel for="sceneNumber" value="Number" />
		<p:spinner id="sceneNumber" value="#{scene.number}" min="1" required="true" />

		<h:outputLabel value="Name" for="name" />
		<p:inputText id="name" value="#{scene.title}" required="true" />

		<h:outputLabel value="Location" for="location" />
		<p:outputPanel>
			<p:autoComplete id="location" dropdown="true" value="#{scene.location}" completeMethod="#{index.locationComplete}"
				var="p" itemLabel="#{p.name}" itemValue="#{p}" converter="location" forceSelection="true" />
			<p:commandButton icon="ui-icon-plusthick" update=":storyEditForm:storyEditMasterDetail">
				<pe:selectDetailLevel listener="${index.createLocation(scene)}" contextValue="#{index.location}"/>
			</p:commandButton>
		</p:outputPanel>

		<h:outputLabel value="GM Description" for="gmDescription" />
		<p:editor id="gmDescription" value="#{scene.gmDescription}" width="600" />

		<h:outputLabel value="Player Description" for="playerDescription" />
		<p:editor id="playerDescription" value="#{scene.playerDescription}" width="600" />
	</h:panelGrid>
	<h:panelGrid columns="2">
		<p:commandButton value="Save" update=":storyEditForm:storyEditMasterDetail" action="#{index.save(scene)}">
			<pe:selectDetailLevel level="3" />
		</p:commandButton>
		<p:commandButton value="Delete" update=":storyEditForm:storyEditMasterDetail" action="#{index.delete( scene)}">
			<pe:selectDetailLevel level="3" />
		</p:commandButton>
	</h:panelGrid>
	<p:commandButton value="Add" update=":storyEditForm:storyEditMasterDetail">
		<pe:selectDetailLevel listener="${index.createActor(scene)}" />
	</p:commandButton>
	<p:dataTable var="actor" value="#{scene.actors}">
		<p:column headerText="Name">
			<h:outputText value="#{actor.name}" />
		</p:column>
		<p:column headerText="Physical Description">
			<h:outputText value="#{actor.physicalDescription}" />
		</p:column>
	</p:dataTable>

</ui:composition>
</html>